<!--iframe inject code from http://stackoverflow.com/questions/13439625/how-to-inject-external-js-files-to-an-iframe-->
<ul class="list-group facet-results-list">
    <% _.each(objects, function (object) { %>
        <% if (object.hasOwnProperty('assetContents')) { %>
            <% var genusTypeStr = object.assetContents[0].genusTypeId; %>
            <% var sourceDoc = object.assetContents[0].text.text %>
        <% } else { %>
            <% var genusTypeStr = object.genusTypeId; %>
            <% var sourceDoc = object.texts.edxml %>
        <% } %>
        <% var objectType = genusTypeStr.slice(genusTypeStr.indexOf('%3A') + 3, genusTypeStr.indexOf('%40')); %>
        <% var objMap = JSON.stringify(object); %>
        <li class="<%- objectType %> resource list-group-item search-result" data-run="<%- object.runNames %>" data-obj="<%- objMap %>">
            <div class="object-wrapper">
                <div class="drag-handles" aria-label="Drag handles for moving the resource">

                </div>
                <div class="resource-icon resource-<%- objectType %>">
                    <div class="ic-custom"></div>
                </div>
                <div class="vertical-box">
                    <div class="vertical-content">
                        <span class="display-name">
                            <%- object.displayName.text %>
                        </span>
                        <span class="description">
                            <%- object.description.text %>
                        </span>
                    </div>
                    <div class="vertical-footer">
                        <span class="resource-run">
                            <%- object.runNames %>
                        </span>
                    </div>
                </div>
                <div class="pull-right resource-preview">
                    <span class="show-preview collapsed">Preview Me</span>
                    <div class="hidden preview-processing">
                        <span class="fa fa-spin fa-refresh" aria-hidden="true"></span>
                        <span class="sr-only">Processing the preview</span>
                    </div>
                    <iframe class="preview-frame hidden" srcdoc="<%- sourceDoc %>"></iframe>
                </div>
            </div>
        </li>
    <% }); %>
</ul>